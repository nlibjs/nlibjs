language: node_js
cache: npm
os:
  - linux
  - osx
node_js:
  - '12'
  - '10'
  - '8'
install:
  - npm ci
script:
  - npm run build
  - |
    if [[ $(node -v) == v12* ]]; then
      npm install -g codecov c8
      c8 npm run lerna:test --parallel
      c8 report --reporter=text-lcov > coverage.lcov
      codecov
    else
      npm run lerna:test --parallel
    fi
